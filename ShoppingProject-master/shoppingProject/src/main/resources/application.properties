spring.application.name=shoppingProject

# ==========================================
# 1. 資料庫設定 (Database Settings)
# ==========================================
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 使用環境變數 DB_HOST，預設為 localhost
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:3306/shopping?useSSL=false&serverTimezone=Asia/Taipei&useUnicode=true&characterEncoding=UTF-8
spring.datasource.username=user2
# 使用環境變數 DB_PASSWORD，保護資料庫安全
spring.datasource.password=${DB_PASSWORD:your_password_here}

# ==========================================
# 2. 伺服器設定 (Server Settings)
# ==========================================
server.port=8080
server.address=0.0.0.0

# ==========================================
# 3. 綠界金流設定 (ECPay Settings)
# ==========================================
ecpay.merchantId=2000132
ecpay.hashKey=${ECPAY_HASH_KEY:5294y06JbISpM5x9}
ecpay.hashIV=${ECPAY_HASH_IV:v77hoKGq4kWxNNIS}
ecpay.apiUrl=https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5
ecpay.encryptType=1

ecpay.ngrokBaseUrl=https://ecooikos.com
ecpay.returnUrlRoute=/ecpay/callback
ecpay.clientBackUrlRoute=/order/payment-result

# 交易預設值
ecpay.choosePayment=ALL
ecpay.periodType=D

# ==========================================
# 4. JPA & 資源快取設定
# ==========================================
spring.web.resources.cache.period=0
spring.web.resources.cache.cachecontrol.no-store=true

spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# ==========================================
# 5. Session & Cookie 設定
# ==========================================
server.servlet.session.cookie.name=JSESSIONID
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=Lax
server.servlet.session.cookie.path=/
server.servlet.session.timeout=30m

# ==========================================
# 6. Spring Security 基礎設定
# ==========================================
spring.security.user.name=disabled
spring.security.user.password=disabled

# ==========================================
# 7. 第三方登入設定 (OAuth2 Settings)
# ==========================================

# Google Login
spring.security.oauth2.client.registration.google.client-id=946599328148-du5ghvllv9jbqmqpqodg1fnd4hbf21fn.apps.googleusercontent.com
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth?prompt=select_account
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v3/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=sub

# Facebook Login
spring.security.oauth2.client.registration.facebook.client-id=1500963761013585
spring.security.oauth2.client.registration.facebook.client-secret=${FACEBOOK_CLIENT_SECRET}
spring.security.oauth2.client.registration.facebook.scope=email,public_profile
spring.security.oauth2.client.registration.facebook.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.facebook.client-name=Facebook
spring.security.oauth2.client.provider.facebook.authorization-uri=https://www.facebook.com/v12.0/dialog/oauth
spring.security.oauth2.client.provider.facebook.token-uri=https://graph.facebook.com/v12.0/oauth/access_token
spring.security.oauth2.client.provider.facebook.user-info-uri=https://graph.facebook.com/me?fields=id,name,email,picture
spring.security.oauth2.client.provider.facebook.user-name-attribute=id

# LINE Login
spring.security.oauth2.client.registration.line.client-id=2008558142
spring.security.oauth2.client.registration.line.client-secret=${LINE_CLIENT_SECRET}
spring.security.oauth2.client.registration.line.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.line.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.line.scope=profile,openid,email

spring.security.oauth2.client.provider.line.authorization-uri=https://access.line.me/oauth2/v2.1/authorize
spring.security.oauth2.client.provider.line.token-uri=https://api.line.me/oauth2/v2.1/token
spring.security.oauth2.client.provider.line.user-info-uri=https://api.line.me/v2/profile
spring.security.oauth2.client.provider.line.user-name-attribute=sub
spring.security.oauth2.client.provider.line.jwk-set-uri=https://api.line.me/oauth2/v2.1/certs
spring.security.oauth2.client.registration.line.client-authentication-method=client_secret_post

# ==========================================
# 8. 郵件服務設定 (Mail Settings)
# ==========================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=oikos1230@gmail.com
# 使用環境變數保護 Gmail 應用程式密碼
spring.mail.password=${MAIL_APP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
server.forward-headers-strategy=native

# ==========================================
# 9. Redis 設定 (Redis Settings)
# ==========================================
# 建議透過環境變數傳入實體 IP，避免暴露於原始碼
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=6379
spring.data.redis.password=${REDIS_PASSWORD}

spring.cache.redis.time-to-live=3600000
spring.cache.redis.cache-config.product_detail.time-to-live=900000
spring.data.redis.database=0
spring.data.redis.timeout=60000

# ==========================================
# 10. Google reCAPTCHA 設定
# ==========================================
google.recaptcha.secret=${RECAPTCHA_SECRET}
google.recaptcha.url=https://www.google.com/recaptcha/api/siteverify