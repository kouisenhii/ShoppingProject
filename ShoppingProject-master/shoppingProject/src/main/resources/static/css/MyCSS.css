/* =========================================
   1. 全域佈局 (Header, Sidebar, Main, Footer)
   ========================================= */
header {
    background-color: #FAF0E6;
}

#layout {
    display: flex;
    min-height: calc(100vh - 60px);
}

aside {
    background-color: #e9e1da;
    width: 220px;
    min-height: 100vh;
    padding: 2rem 1rem;
    border-right: 2px solid #e6d8c3;
}

aside h6 {
    font-weight: 600;
    color: #5A4636;
    margin-top: 1.5rem;
}

aside ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

aside li {
    cursor: pointer;
    padding: 6px 10px;
    border-radius: 5px;
    transition: 0.2s;
}

aside li:hover {
    background-color: #908b88;
    color: white;
}

main {
    flex: 1;
    background-color: #ece9e9;
    padding: 2rem 3rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

main h2 {
    font-size: 1.5rem;
    font-weight: 700;
    border-bottom: 2px solid #e6d8c3;
    padding-bottom: .5rem;
    margin-bottom: 1.5rem;
}

footer {
    text-align: center;
    padding: 1rem;
    background-color: #fdf7f2;
    color: #5A4636;
    border-top: 1px solid #e6d8c3;
}

.member-layout {
    min-height: calc(100vh - 100px);
    /* 確保內容區有足夠高度 */
}

/* =========================================
   2. 通用元件 (按鈕, 表格, 卡片)
   ========================================= */
.menu-card {
    background-color: #fff;
    border: 1px solid #e6d8c3;
    border-radius: 10px;
    padding: 1rem;
    width: 150px;
    transition: all 0.2s ease;
}

.menu-card:hover {
    background-color: white;
    transform: translateY(-3px);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
}

.menu-card img {
    width: 40px;
    margin-top: 8px;
}

.btn-submit {
    font-size: 18px;
    background-color: #e5d8c8;
    border: 1px solid #e6d8c3;
    color: #4a3c2f;
    font-weight: 600;
    padding: .5rem 2rem;
    border-radius: 6px;
    transition: 0.2s;
}

.btn-submit:hover {
    background-color: #f0e0ca;
}

/* 表格類呈現樣式 */
table {
    width: 100%;
    background-color: #ffffff;
    border-collapse: collapse;
    border: 1px solid #e6d8c3;
}

th,
td {
    border: 1px solid #e6d8c3;
    padding: 10px 12px;
    text-align: center;
}

th {
    background-color: #f5e6d3;
    font-weight: 600;
}

tr:nth-child(even) {
    background-color: #fbf4ed;
}

.info-block {
    background-color: #fff;
    border: 1px solid #e6d8c3;
    border-radius: 8px;
    padding: 1.5rem 2rem;
    margin-bottom: 2rem;
}

.info-row {
    border-bottom: 1px dashed #e6d8c3;
    padding: .6rem 0;
}

.btn-disabled {
    background-color: #cccccc !important;
    color: #666666 !important;
    cursor: not-allowed;
    opacity: 0.7;
}

.text-danger {
    color: #dc3545;
}

/* =========================================
   3. 用戶頭像樣式 (修復 Git 衝突後版本)
   ========================================= */
.user-icon-wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    width: 100%;
}

.user-icon-label {
    cursor: pointer;
    position: relative;
    display: block;
    width: 150px;
    height: 150px;
    border-radius: 50%;
    overflow: hidden;
    background-color: #f0f0f0;
    flex-shrink: 0;
    border: 3px solid #e6d8c3;
}

#userIconDisplay {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: filter 0.3s ease;
    display: block;
}

.icon-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    opacity: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s ease;
    z-index: 10;
    font-size: 14px;
    letter-spacing: 1px;
}

.user-icon-label:hover .icon-overlay {
    opacity: 1;
}

.user-icon-label:hover #userIconDisplay {
    filter: brightness(80%);
}

/* =========================================
   4. 會員中心 - 收藏清單專用樣式 (新版)
   ========================================= */

/* 列表項目容器 */
.wishlist-item {
    background-color: #fff;
    border-bottom: 1px solid #f0f0f0;
    padding: 20px 15px;
    transition: all 0.2s ease;
    border-radius: 6px;
}

.wishlist-item:hover {
    background-color: #fcfcfc;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
    transform: translateY(-2px);
}

/* 佈局修正：讓 flex 項目對齊更好 */
.wishlist-item.d-flex {
    align-items: center;
}

/* Checkbox */
.wishlist-item .form-check {
    margin-right: 1.5rem;
}

.wishlist-item .form-check-input {
    width: 1.2em;
    height: 1.2em;
    cursor: pointer;
    border-color: #ccc;
}

.wishlist-item .form-check-input:checked {
    background-color: #8B7355;
    border-color: #8B7355;
}

/* 商品圖片 */
.item-details {
    display: flex;
    align-items: center;
    margin-right: 1.5rem;
}

.wishlist-img {
    width: 100px;
    height: 100px;
    object-fit: contain;
    border: 1px solid #eee;
    background-color: #fff;
    padding: 5px;
    border-radius: 4px;
}

/* 商品文字資訊 */
.flex-grow-1 h6 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #4a4a4a;
    margin-bottom: 0.5rem;
    letter-spacing: 0.5px;
}

.flex-grow-1 p.text-muted {
    font-size: 0.9rem;
    color: #8c8c8c !important;
    line-height: 1.4;
    margin-bottom: 2px;
}

/* 價格顯示 */
.price-and-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

.price-details {
    text-align: right;
    margin-right: 1.5rem;
    min-width: 100px;
}

.price-details .fw-bold {
    font-size: 1.25rem;
    color: #8B7355; /* 古銅色 */
    font-weight: 700;
    font-family: 'Montserrat', sans-serif;
}

/* 刪除按鈕 */
.btn-delete-single {
    transition: transform 0.2s;
    opacity: 0.6;
    padding: 10px;
    margin-right: 10px;
}

.btn-delete-single img {
    width: 20px;
    height: 20px;
}

.btn-delete-single:hover {
    transform: scale(1.1);
    opacity: 1;
}

/* 加入購物車按鈕 */
.btn-add-cart {
    background-color: #8B7355; /* 古銅色 */
    color: #fff;
    border: none;
    font-weight: 500;
    padding: 8px 20px;
    font-size: 0.95rem;
    border-radius: 4px;
    transition: background-color 0.2s;
    white-space: nowrap;
}

.btn-add-cart:hover {
    background-color: #6d5a41;
    color: #fff;
    box-shadow: 0 2px 6px rgba(139, 115, 85, 0.3);
}

/* 底部操作區 */
#wishlistForm .border-top {
    border-color: #e6d8c3 !important;
    padding-top: 2rem !important;
    margin-top: 2rem !important;
}

#btnSelectAll,
#btnDeleteSelected {
    background-color: #EFECE7;
    color: #5A4636;
    border: 1px solid #e0dcd5;
    font-weight: 600;
    padding: 8px 24px;
    font-size: 1rem;
    border-radius: 6px;
    transition: 0.2s;
}

#btnSelectAll:hover,
#btnDeleteSelected:hover {
    background-color: #e5d8c8;
    color: #3e3932;
}

/* =========================================
   5. SweetAlert 與 Toast 樣式修正
   ========================================= */
div.swal2-container.swal2-top-end {
    top: 70px !important;
}

.my-toast-popup {
    pointer-events: none !important;
    opacity: 0.9 !important;
}

/* Header Dropdown 樣式 (確保與 header_footer.js 配合) */
.wishlist-dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    width: 300px;
    background: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    border-radius: 4px;
    border: 1px solid #eee;
    display: none;
}

.wishlist-dropdown-menu.show {
    display: block !important;
}

/* 手機版選單優化 */
#mobile-user-panel .nav-link {
    padding: 12px 0; /* 增加垂直間距 */
    transition: color 0.2s ease;
}

#mobile-user-panel .nav-link:hover {
    color: #8B7355 !important; /* 懸停時變為古銅色 */
}

#mobile-user-panel .nav-link i {
    font-size: 1.2rem; /* 圖示稍微放大 */
}

/* =========================================
   6. RWD 響應式調整 (會員中心專用)
   ========================================= */

/* 手機與平板直向 (寬度小於 768px) */
@media (max-width: 768px) {
    
    /* 1. 調整整體佈局容器 */
    .member-layout {
        min-height: auto !important; /* 取消 100vh 高度限制 */
        padding-bottom: 2rem;
        margin-top: 60px !important;
    }

    /* 2. 側邊欄變形為上方導覽列 */
    aside {
        width: 100% !important;      /* 寬度填滿 */
        min-height: auto !important; /* 高度自動 */
        border-right: none !important;
        border-bottom: 1px solid #e6d8c3;
        background-color: transparent !important; /* 去除背景色，融入頁面 */
        padding: 0 0 1rem 0 !important;
    }

    /* 隱藏原本的分類標題 (訂單管理/我的帳戶)，直接顯示按鈕 */
    aside h6 {
        display: none; 
    }

    /* 3. 選單按鈕樣式優化 (變成好按的方塊) */
    aside li {
        background-color: #fff;
        border: 1px solid #e6d8c3;
        padding: 10px 15px !important;
        margin-bottom: 0 !important;
        font-size: 0.95rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        white-space: nowrap; /* 防止文字換行 */
    }

    /* 選中或懸停狀態 */
    aside li:active, 
    aside li:hover {
        background-color: #8B7355; /* 古銅色 */
        color: white;
        border-color: #8B7355;
    }

    /* 4. 主內容區調整 */
    main {
    	padding-top: 100px!important;
        padding: 1.5rem 1rem !important; /* 縮小內距，避免太擠 */
        border-radius: 0; /* 手機版通常不需要圓角 */
        box-shadow: none; /* 去除陰影讓畫面更乾淨 */
    }

    /* 調整主標題大小 */
    main h2 {
        font-size: 1.25rem !important;
        text-align: center;
    }
    
    /* 調整歡迎標題大小 */
    main h1.fw-bold {
        font-size: 1.5rem !important;
        text-align: center;
    }

    /* 5. 表格響應式處理 (讓訂單表格可以橫向滑動) */
    .table-responsive {
        border: 1px solid #e6d8c3;
        border-radius: 6px;
    }
    
    /* 強制表格表頭不換行 */
    table th {
        white-space: nowrap;
        font-size: 0.9rem;
        padding: 8px !important;
    }
    
    table td {
        font-size: 0.9rem;
        padding: 8px !important;
    }

 /* 6. 個人資料表單調整 (修正版 v2：修復出生年月日換行與信箱顯示) */
    .info-block {
        padding: 1rem !important;
    }
    
    .info-row {
        display: flex;
        flex-direction: row !important; /* 強制水平排列 */
        flex-wrap: nowrap !important;   /* 禁止區塊換行 */
        align-items: center;            /* 垂直置中對齊 */
        gap: 0;
        border-bottom: 1px dashed #e6d8c3;
        padding: 10px 0;
        
        /* 關鍵：手機版字體改小一點 (原本預設約 16px -> 改為 14px) */
        /* 這樣「出生年月日」跟「長信箱」才塞得進同一行 */
        font-size: 14px; 
    }
    
    /* 左邊標題欄 (姓名、出生年月日...) */
    .info-row .col-md-3 {
        /* 加寬到 120px，確保 "出生年月日" 不會換行 */
        flex: 0 0 120px !important;
        width: 120px !important;
        max-width: 120px !important;
        
        white-space: nowrap; /* 強制標題文字不換行 (解決"日"跑掉的問題) */
        
        font-weight: bold;
        color: #8B7355;
        margin-bottom: 0 !important;
        text-align: left;
        padding-right: 5px !important;
    }
    
    /* 右邊內容欄 (信箱、地址...) */
    .info-row .col-md-9 {
        flex: 1 !important;
        width: auto !important;
        padding-left: 0 !important;
        
        /* 讓長字串(如信箱)如果真的太長，可以換行顯示，但字體變小後通常能一行 */
        word-break: break-all; 
        color: #5a5a5a;
    }

    /* ======== 【新增】收藏清單手機版修復 ======== */
    
    /* 1. 讓項目容器允許換行 */
    .wishlist-item {
        flex-wrap: wrap; 
        position: relative; /* 用於定位 */
    }

    /* 2. 調整 Checkbox 與圖片位置，避免太擠 */
    .wishlist-item .form-check {
        margin-right: 10px !important;
    }
    
    .item-details {
        margin-right: 15px !important;
    }

    /* 3. 文字描述區塊：強制佔滿剩餘寬度，把價格擠到下一行 */
    .wishlist-item .flex-grow-1 {
        flex: 1 1 50% !important; /* 讓文字區塊保持彈性 */
        margin-right: 0 !important;
        min-width: 150px; /* 確保最小寬度 */
    }

    /* 4. 價格與按鈕區塊：強制換行到下方，並靠右對齊 */
    .price-and-actions {
        width: 100%;              /* 佔滿整行 */
        margin-top: 15px;         /* 與上方文字拉開距離 */
        padding-top: 15px;        /* 增加內距 */
        border-top: 1px dashed #eee; /* 加一條虛線分隔，視覺更清楚 */
        justify-content: flex-end; /* 內容靠右 */
    }

    /* 5. 調整手機版價格字體，稍微小一點避免突兀 */
    .price-details .fw-bold {
        font-size: 1.1rem; 
    }
    
    /* 6. 調整按鈕大小，手機版好按一點 */
    .btn-add-cart {
        padding: 6px 12px;
        font-size: 0.85rem;
    }
}